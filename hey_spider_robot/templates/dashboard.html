<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hey Spider Robot Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --bg-primary: #121212;
            --bg-secondary: #1e1e1e;
            --bg-tertiary: #252525;
            --accent-primary: #00e5ff;
            --accent-secondary: #ff2a6d;
            --text-primary: #ffffff;
            --text-secondary: #b3b3b3;
            --success: #00c853;
            --warning: #ffab00;
            --error: #ff1744;
            --card-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            --card-radius: 12px;
            --transition: all 0.3s ease;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: var(--bg-secondary);
            border-radius: var(--card-radius);
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
        }
        
        .header h1 {
            font-size: 2.8rem;
            margin: 0;
            background: linear-gradient(45deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 800;
            letter-spacing: 1px;
        }
        
        .header p {
            margin-top: 12px;
            color: var(--text-secondary);
            font-size: 1.1rem;
        }
        
        .connection-status {
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            margin: 15px auto;
            font-weight: bold;
            max-width: 300px;
            background: var(--bg-tertiary);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .connection-status::before {
            content: '';
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
        }
        
        .connected {
            color: var(--success);
            border: 1px solid rgba(0, 200, 83, 0.3);
        }
        
        .connected::before {
            background: var(--success);
            box-shadow: 0 0 8px var(--success);
        }
        
        .disconnected {
            color: var(--error);
            border: 1px solid rgba(255, 23, 68, 0.3);
        }
        
        .disconnected::before {
            background: var(--error);
            box-shadow: 0 0 8px var(--error);
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            grid-template-rows: auto auto auto;
            gap: 25px;
        }
        
        .panel {
            background: var(--bg-secondary);
            border-radius: var(--card-radius);
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            height: fit-content;
        }
        
        .panel:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6);
        }
        
        .panel h3 {
            margin-bottom: 20px;
            color: var(--accent-primary);
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
        }
        
        .video-panel {
            grid-row: span 2;
        }
        
        #videoFeed {
            width: 100%;
            max-width: 640px;
            border-radius: 8px;
            display: block;
            margin: 0 auto;
            background: #000;
            min-height: 240px;
            box-shadow: 0 0 20px rgba(0, 229, 255, 0.1);
            border: 1px solid rgba(0, 229, 255, 0.2);
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }
        
        .btn {
            padding: 14px 20px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(45deg, var(--bg-tertiary), var(--bg-secondary));
            color: var(--text-primary);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 229, 255, 0.2);
            border-color: rgba(0, 229, 255, 0.3);
        }
        
        .btn:active {
            transform: translateY(-1px);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 12px 0;
            padding: 14px;
            background: var(--bg-tertiary);
            border-radius: 8px;
            border-left: 4px solid var(--accent-primary);
            transition: var(--transition);
        }
        
        .status-item:hover {
            transform: translateX(5px);
        }
        
        .status-value {
            font-weight: bold;
            color: var(--accent-primary);
        }
        
        .detection-list {
            max-height: 200px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--accent-primary) var(--bg-tertiary);
        }
        
        .detection-list::-webkit-scrollbar {
            width: 6px;
        }
        
        .detection-list::-webkit-scrollbar-track {
            background: var(--bg-tertiary);
            border-radius: 3px;
        }
        
        .detection-list::-webkit-scrollbar-thumb {
            background: var(--accent-primary);
            border-radius: 3px;
        }
        
        .detection-item {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 10px 14px;
            background: var(--bg-tertiary);
            border-radius: 6px;
            transition: var(--transition);
        }
        
        .detection-item:hover {
            background: rgba(0, 229, 255, 0.1);
        }
        
        .confidence {
            color: var(--accent-secondary);
            font-weight: bold;
        }
        
        .ai-thought {
            font-style: italic;
            background: var(--bg-tertiary);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid var(--accent-secondary);
            min-height: 80px;
            position: relative;
            transition: var(--transition);
        }
        
        .ai-thought::before {
            content: '"';
            font-size: 3rem;
            color: var(--accent-secondary);
            opacity: 0.3;
            position: absolute;
            top: 5px;
            left: 10px;
        }
        
        .oled-display {
            background: #000;
            color: var(--accent-primary);
            font-family: 'Courier New', monospace;
            padding: 20px;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.5;
            height: 170px;
            overflow: hidden;
            border: 2px solid var(--accent-primary);
            box-shadow: inset 0 0 15px rgba(0, 229, 255, 0.2), 0 0 15px rgba(0, 229, 255, 0.1);
            text-shadow: 0 0 5px var(--accent-primary);
        }
        
        .voice-commands {
            grid-column: span 2;
        }
        
        .command-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
        }
        
        .command-item {
            padding: 15px;
            background: var(--bg-tertiary);
            border-radius: 8px;
            border-left: 4px solid var(--accent-secondary);
            transition: var(--transition);
        }
        
        .command-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 42, 109, 0.1);
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { 
                box-shadow: 0 0 0 0 rgba(0, 229, 255, 0.4);
            }
            70% { 
                box-shadow: 0 0 0 10px rgba(0, 229, 255, 0);
            }
            100% { 
                box-shadow: 0 0 0 0 rgba(0, 229, 255, 0);
            }
        }
        
        .glow {
            animation: glow 1.5s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from {
                box-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px var(--accent-primary), 0 0 20px var(--accent-primary);
            }
            to {
                box-shadow: 0 0 10px #fff, 0 0 15px var(--accent-primary), 0 0 20px var(--accent-primary), 0 0 25px var(--accent-primary);
            }
        }
        
        @media (max-width: 1200px) {
            .dashboard {
                grid-template-columns: 1fr 1fr;
            }
            .video-panel {
                grid-column: span 2;
                grid-row: span 1;
            }
            .voice-commands {
                grid-column: span 2;
            }
        }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            .video-panel {
                grid-column: span 1;
            }
            .voice-commands {
                grid-column: span 1;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .controls {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🕷️ Hey Spider Robot</h1>
            <p>AI-Powered Spider Robot with Real-Time Control & Monitoring</p>
            <div id="connectionStatus" class="connection-status disconnected">
                Connecting to robot...
            </div>
        </div>
        
        <div class="dashboard">
            <!-- Video Feed Panel -->
            <div class="panel video-panel">
                <h3>📹 Live Camera Feed</h3>
                <img id="videoFeed" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='640' height='240'%3E%3Crect width='100%' height='100%' fill='%23333'/%3E%3Ctext x='50%' y='50%' font-family='Arial' font-size='18' fill='white' text-anchor='middle' dy='.3em'%3ECamera Initializing...%3C/text%3E%3C/svg%3E" alt="Camera feed">
                
                <div class="controls">
                    <button class="btn" onclick="sendCommand('walk forward')" id="walkBtn">🚶 Walk Forward</button>
                    <button class="btn" onclick="sendCommand('turn left')" id="leftBtn">↺ Turn Left</button>
                    <button class="btn" onclick="sendCommand('turn right')" id="rightBtn">↻ Turn Right</button>
                    <button class="btn" onclick="sendCommand('dance')" id="danceBtn">💃 Dance</button>
                    <button class="btn" onclick="sendCommand('wave')" id="waveBtn">👋 Wave</button>
                    <button class="btn" onclick="sendCommand('take photo')" id="photoBtn">📸 Take Photo</button>
                </div>
            </div>
            
            <!-- Robot Status Panel -->
            <div class="panel">
                <h3>🤖 Robot Status</h3>
                <div class="status-item">
                    <span>Distance Sensor:</span>
                    <span class="status-value" id="distance">-- cm</span>
                </div>
                <div class="status-item">
                    <span>Mode:</span>
                    <span class="status-value" id="mode">INITIALIZING</span>
                </div>
                <div class="status-item">
                    <span>Moving:</span>
                    <span class="status-value" id="moving">No</span>
                </div>
                <div class="status-item">
                    <span>Detections:</span>
                    <span class="status-value" id="detectionCount">0</span>
                </div>
                <div class="status-item">
                    <span>Emotional State:</span>
                    <span class="status-value" id="emotionalState">curious</span>
                </div>
            </div>
            
            <!-- OLED Display Simulation -->
            <div class="panel">
                <h3>📺 OLED Display</h3>
                <div class="oled-display" id="oledDisplay">
                    HEY SPIDER<br>
                    Mode: INITIALIZING<br>
                    Dist: --.-cm<br>
                    Cmd: --<br>
                    Sees: 0 objects<br>
                    Booting up...
                </div>
            </div>
            
            <!-- AI Thoughts Panel -->
            <div class="panel">
                <h3>🧠 AI Thoughts</h3>
                <div class="ai-thought" id="aiThought">
                    "System initializing... Loading personality matrix..."
                </div>
                <div class="status-item">
                    <span>AI Status:</span>
                    <span class="status-value" id="aiStatus">Loading...</span>
                </div>
            </div>
            
            <!-- Recent Detections -->
            <div class="panel">
                <h3>👁️ Object Detection</h3>
                <div class="detection-list" id="detectionList">
                    <p style="text-align: center; opacity: 0.7;">No objects detected yet...</p>
                </div>
                <div class="status-item">
                    <span>Detection Description:</span>
                </div>
                <div id="detectionDescription" style="font-style: italic; opacity: 0.8;">
                    Waiting for camera initialization...
                </div>
            </div>
            
            <!-- Voice Commands -->
            <div class="panel voice-commands">
                <h3>🎙️ Voice Commands</h3>
                <p style="margin-bottom: 15px; color: var(--text-secondary);">Say <strong style="color: var(--accent-secondary);">"Hey Spider"</strong> followed by:</p>
                <div class="command-list">
                    <div class="command-item">
                        <strong>Movement:</strong><br>
                        walk forward, turn left, turn right
                    </div>
                    <div class="command-item">
                        <strong>Actions:</strong><br>
                        dance, wave, stop
                    </div>
                    <div class="command-item">
                        <strong>Camera:</strong><br>
                        take a photo, take a picture
                    </div>
                    <div class="command-item">
                        <strong>AI Commands:</strong><br>
                        Natural language is supported!
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Simulate robot data for demonstration (since we don't have actual robot connection)
        let isConnected = false;
        let commandInProgress = false;
        let simulationData = {
            distance: 25.7,
            is_moving: false,
            detections: [
                {class: "person", confidence: 0.89},
                {class: "book", confidence: 0.76}
            ],
            emotional_state: "curious",
            ai_thought: "I wonder what that person is doing with that book..."
        };
        
        // Connection status
        const statusElement = document.getElementById('connectionStatus');
        
        // Simulate connection after a delay
        setTimeout(() => {
            isConnected = true;
            statusElement.textContent = 'Connected to Hey Spider Robot';
            statusElement.className = 'connection-status connected';
            document.getElementById('aiStatus').textContent = 'Online';
            
            // Start simulation updates
            setInterval(updateSimulation, 2000);
            updateSimulation(); // Initial update
        }, 3000);
        
        function updateSimulation() {
            // Simulate changing data
            simulationData.distance = 15 + Math.random() * 30;
            simulationData.emotional_state = ['curious', 'excited', 'focused', 'playful'][Math.floor(Math.random() * 4)];
            
            const thoughts = [
                "I wonder what that person is doing with that book...",
                "The lighting in this room is quite nice.",
                "I should explore that corner over there.",
                "My sensors are picking up interesting patterns.",
                "Time for some spider adventures!"
            ];
            simulationData.ai_thought = thoughts[Math.floor(Math.random() * thoughts.length)];
            
            // Update status information
            document.getElementById('distance').textContent = simulationData.distance.toFixed(1) + ' cm';
            document.getElementById('moving').textContent = simulationData.is_moving ? 'Yes' : 'No';
            document.getElementById('detectionCount').textContent = simulationData.detections.length;
            document.getElementById('emotionalState').textContent = simulationData.emotional_state;
            
            // Update AI thought
            document.getElementById('aiThought').textContent = '"' + simulationData.ai_thought + '"';
            
            // Update OLED display simulation
            updateOLEDDisplay(simulationData);
            
            // Update detections
            updateDetections(simulationData.detections);
        }
        
        function updateOLEDDisplay(data) {
            const oledDisplay = document.getElementById('oledDisplay');
            const mode = data.is_moving ? 'MOVING' : 'READY';
            const detectionCount = data.detections.length;
            const thought = data.ai_thought ? 
                (data.ai_thought.length > 20 ? data.ai_thought.substring(0, 20) + '...' : data.ai_thought) : 
                'Thinking...';
            
            oledDisplay.innerHTML = `HEY SPIDER<br>Mode: ${mode}<br>Dist: ${data.distance.toFixed(1)}cm<br>Cmd: --<br>Sees: ${detectionCount} objects<br>${thought}`;
            
            // Update mode display
            document.getElementById('mode').textContent = mode;
        }
        
        function updateDetections(detections) {
            const detectionList = document.getElementById('detectionList');
            const detectionDesc = document.getElementById('detectionDescription');
            
            if (detections.length === 0) {
                detectionList.innerHTML = '<p style="text-align: center; opacity: 0.7;">No objects detected</p>';
                detectionDesc.textContent = "I don't see anything interesting.";
                return;
            }
            
            // Update detection list
            let html = '';
            detections.forEach(detection => {
                html += `<div class="detection-item">
                    <span>${detection.class}</span>
                    <span class="confidence">${(detection.confidence * 100).toFixed(1)}%</span>
                </div>`;
            });
            detectionList.innerHTML = html;
            
            // Create natural language description
            const objectCounts = {};
            detections.forEach(det => {
                objectCounts[det.class] = (objectCounts[det.class] || 0) + 1;
            });
            
            const descriptions = [];
            for (const [objClass, count] of Object.entries(objectCounts)) {
                descriptions.push(count === 1 ? `1 ${objClass}` : `${count} ${objClass}s`);
            }
            
            let description;
            if (descriptions.length === 1) {
                description = `I can see ${descriptions[0]}.`;
            } else if (descriptions.length === 2) {
                description = `I can see ${descriptions[0]} and ${descriptions[1]}.`;
            } else {
                description = `I can see ${descriptions.slice(0, -1).join(', ')}, and ${descriptions[descriptions.length - 1]}.`;
            }
            
            detectionDesc.textContent = description;
        }
        
        function sendCommand(command) {
            if (!isConnected) {
                alert('Not connected to robot!');
                return;
            }
            
            if (commandInProgress) {
                console.log('Command already in progress, ignoring');
                return;
            }
            
            commandInProgress = true;
            
            // Disable all buttons temporarily
            const buttons = document.querySelectorAll('.btn');
            buttons.forEach(btn => {
                btn.disabled = true;
                btn.classList.add('pulse');
            });
            
            console.log('Sending command:', command);
            
            // Simulate command execution
            simulationData.is_moving = true;
            document.getElementById('moving').textContent = 'Yes';
            document.getElementById('mode').textContent = 'MOVING';
            
            // Visual feedback
            const activeBtn = event ? event.target : null;
            if (activeBtn) {
                activeBtn.style.background = `linear-gradient(45deg, #ff2a6d, #c2185b)`;
            }
            
            // Re-enable buttons after delay
            setTimeout(() => {
                buttons.forEach(btn => {
                    btn.disabled = false;
                    btn.classList.remove('pulse');
                });
                if (activeBtn) {
                    activeBtn.style.background = 'linear-gradient(45deg, var(--bg-tertiary), var(--bg-secondary))';
                }
                commandInProgress = false;
                simulationData.is_moving = false;
                document.getElementById('moving').textContent = 'No';
                document.getElementById('mode').textContent = 'READY';
            }, 3000);
        }
        
        // Keyboard shortcuts
        document.addEventListener('keydown', function(event) {
            if (event.ctrlKey || event.altKey || event.metaKey) return;
            
            switch(event.key.toLowerCase()) {
                case 'w':
                case 'arrowup':
                    sendCommand('walk forward');
                    break;
                case 'a':
                case 'arrowleft':
                    sendCommand('turn left');
                    break;
                case 'd':
                case 'arrowright':
                    sendCommand('turn right');
                    break;
                case ' ':
                    event.preventDefault();
                    sendCommand('dance');
                    break;
                case 'p':
                    sendCommand('take photo');
                    break;
            }
        });
    </script>
</body>
</html>